# Scene Unpacker scripts

Language: Русский | [English](README.md)

Видео тур: [youtube](https://youtu.be/sWB87LuVa3s)

## Что это за репозиторий

В этом репозитории находятся скрипты для распаковки архивов, в которых распространяются релизы, перезалитые с [варез-сцен](https://ru.wikipedia.org/wiki/%D0%92%D0%B0%D1%80%D0%B5%D0%B7-%D1%81%D1%86%D0%B5%D0%BD%D0%B0). Скрипты для разных ОС с использованием как встроенных в ОС архиваторов, так и сторонних.

---

Обычно при скачивании архивов в которых находится материал с варез-сцен - внутри находится множество мелких архивов или частей архивов и другие файлы (например файлы `.nfo`, `.sfv`, `.diz`).

Я не до конца понимаю зачем так сделано - зачем сжимать файлы в архив разделенный на части, и все части сжимать индивидуально, а потом все эти части помещать еще в 1 общий архив.

Такая повсеместная архивация и вложенность архивов создает значительные затруднения при ручной распаковке, особенно на macOS, где большинство архиваторов принудительно создают папку с названием архива и помещают в нее распакованные файлы (а если в корне архива тоже находится папка с аналогичным именем, то ручная распаковка превращается в ад).

Насколько мне известно это происходит потому, что изначально на варез-сценах материал релизы распространяются в виде этих мелких частей 1 большого архива. А те, кто перезаливают эти части на другие ресурсы - просто запаковывают их в 1 архив без предварительной распаковки мелких частей. Если это действительно так, то у меня возникает вопрос - зачем изначально релиз распространять в виде мелких частей архива. У меня есть такие варианты ответов:
- возможность скачать файлы при нестабильном интернете
- дань традициям, когда был медленный интернет
- затруднение анализа внутренностей

Все это лишь гипотеза, у меня никогда не было доступа к варез-сценам, куда релиз группы изначально публикуют свои релизы. Если кто-то знает истинные причины зачем релизы делятся на множество мелких частей - напишите вашу версию в разделе Issues данного репозитория.

## Как пользоваться

### На Windows:
В Powershell
```powershell
cd .\Scene-Unpacker-scripts\Windows
.\Unpacker.ps1 -targetPath "path to folder with archives" -outputFolderPath "path to folder for unpacked" -overwriteExisting -smartRenameMode 1 -duplicatesProcessMode 1 -deleteArchiveAfterUnpack
```
или
```powershell
cd .\Scene-Unpacker-scripts\Windows
.\Unpacker.ps1 -targetPath "path to folder with archives"
```
или как-нибудь иначе.

Подробнее про возможные аргументы и их описании смотрите в [документации](./docs/docs_RU.md)

## Документация

Смотрите в [папке docs](./docs/docs_RU.md)

## TODO

- [ ] Добавить режим расширенного логирования выполненных действий
- [ ] Добавить режим для перемещения файлов и папок в Корзину вместо обычного удаления
- [ ] Написать/портировать решение для macOS
- [ ] Написать/портировать решение для Linux

## Системные требования

Необходимо наличие исполняемых файлов одного из архиваторов, поддерживаемых скриптом, в папке со скриптом. Либо эти же архиваторы должны быть установленны по в стандартные папки в системе: 

### На macOS:
- todo

### На Windows:
- 7-zip https://www.7-zip.org/
- Также рекомендуется отключить [ограничение длины путей Windows](https://learn.microsoft.com/ru-ru/windows/win32/fileio/maximum-file-path-limitation?tabs=registry)

Весь код был написан и протестирован в Windows 10 x64 22H2 с 7-Zip 24.08 (x64)

Я не проверял совместимость кода и использованных функций Powershell с предыдущими версиями. Вероятно для их выполнения понадобится Powershell 5.1 который идет в комплекте с Windows 10.

Если вы работаете на Windows 7, 8, 8.1 то, вероятно, вам необходимо будет установить [Microsoft .NET Framework 4.8](https://support.microsoft.com/topic/microsoft-net-framework-4-8-offline-installer-for-windows-9d23f658-3b97-68ab-d013-aa3c3e7495e0) и [Powershell 5.1](https://www.microsoft.com/download/details.aspx/?id=54616) чтобы код из этого репозитория у вас работал.

### На Linux:
- todo